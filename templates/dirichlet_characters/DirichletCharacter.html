{% extends 'homepage.html' %}

{% block content %}
    <!--<div id="header">
        <div class="logo">
            <a href="/Character/Dirichlet">{{ title }} home</a>
        </div>
        <div class="banner">
            <span>The logo of the portal could go here... </span>
        </div>
    </div>-->

<script>
var cur_system = null;
function show_code(system) {
    $('.sage').hide();
    $('.pari').hide();
    $('.magma').hide();
    if (cur_system == null) {
      $('.'+system).show();
      cur_system = system;
    } else {
      $('.'+system).hide();
      cur_system = null;
    }
}
</script>

<style>
.output {
    margin:20px 0;
    text-align: center;
}
table.navi td {
    padding: 0;
}
table.props tr td:first-child {
    width: 5em;
}
<<<<<<< local
#content p, #content form, #content div {
    margin-left: 20px;
}
=======

>>>>>>> other
</style>
        <div align="right">
            <font size="3">Show commands for:</font>
            <a onclick="show_code('sage'); return false" href='#'>sage</a>
        </div>
 
        <div class='sage nodisplay code'>sage: chi = DirichletGroup({{modulus}})[{{number}}]</div>

        {# Kronecker symbol #}

        {% if order|int == 2 %}
        <h2>
            {{ KNOWL('character.dirichlet.kronecker_symbol') }} Representation
        </h2>
        <div class = 'sage nodisplay code'>sage: a.kronecker({{conductor}})</div>
        <p>
            {{ kronsymbol }}
        </p>
        {% endif %}

        {# Induced character #}

        {% if primitive=="False" %}
        <h2>
            Inducing {{ KNOWL('character.dirichlet.induced_character', title="Primitive") }}
        </h2>
        <div class = 'sage nodisplay code'>sage: chi.primitive_character()</div>
        <p>
        <a href="{{ url_for('render_webpage_label', 
            modulus = inducedchar_modulus, 
            number  = inducedchar_number)}}">
            {{inducedchar_tex}}
        </a>
        </p>
        {% endif %}

        {# Values #}
        
        <h2>
            {{ KNOWL('character.dirichlet.values', title="Values") }}
        </h2>
        <div class = 'sage nodisplay code'>sage: chi.values()</div>
        <p>
            {% if root_unity=="True" %} 
            For \(\zeta_{ {{ zetaorder }} }\) a primitive 
            \( {{ zetaorder }} \)-th root of unity
            <br><br/> 
            {% endif %}
        </p>
        <div align="left"> 
            [\({{ valstex|join("\) , \(") }}\)]
        </div>
        
        {# Values on generators #}

        <h2>
            {{ KNOWL('character.dirichlet.values_on_gens', title="Values on Generators") }}
        </h2>
        <div class = 'sage nodisplay code'>sage: chi.values_on_gens()</div>
        <p>
            \( {{ unitgens }} \) &rarr; \( {{ genvalstex }} \)
        </p>

        <h2> {{ KNOWL('character.dirichlet.basic_properties', title="Basic properties") }} </h2>

        {# Basic properties #}
        <table class="props">
            <tr>
                <td>
                    <span class='sage nodisplay code'>sage: chi.conductor()</span>
                </td>
            </tr>
            <tr>
                <td>Conductor</td>
                <td>=</td>
                <td>\({{ conductor }}\)</td>
            </tr>
            <tr>
                <td>
                    <span class='sage nodisplay code'>sage: chi.order()</span>
                </td>
            </tr>
            <tr>
                <td> Order </td>
                <td>=</td>
                <td>\({{ order }} \)</td>
            </tr>
            <tr>
                <td>
                    <span class='sage nodisplay code'>sage: chi.is_even() or chi.is_odd()</span>
                </td>
            </tr>
            <tr>
                <td> Parity </td>
                <td>=</td>
                <td> {{ parity }}</td>
            </tr>
            <tr>
                <td> Real </td>
                <td>=</td>
                    {% if sign=="True" %}
                    <td> Yes</td>
                    {% else %}
                    <td> No </td>
                    {% endif %}
            </tr>
            <tr>
                <td>
                    <span class='sage nodisplay code'>sage: chi.is_primitive()</span>
                </td>
            </tr>
            <tr>
                <td> Primitive </td>
                <td>=</td>
                    {% if primitive=="True" %}
                    <td>Yes</td> 
                    {% else %}
                    <td> No</td>  
                    {% endif %}
            </tr>
        </table>
        
        {# Gauss sum #}

        <h2>
            {{ KNOWL('character.dirichlet.gauss_sum') }}
        </h2>
        <div class = 'sage nodisplay code'>sage: chi.gauss_sum()</div>
        <form> \( \tau_{ a }( \chi_{ {{number}} } )\;\)  at \(\;a = \)
            <input id="calc-gauss-input" size=10 placeholder="2">
            <button id="calc-gauss-go"> Compute </button>
            <span class="formexample"> e.g. 2 </span>
            <div class="slider" id="slider-gauss"></div>
        </form>
        <div class="output"><span id="calc-gauss-output"></span></div>

        {# Jacobi sum #}

        <h2>
            {{ KNOWL('character.dirichlet.jacobi_sum') }}
        </h2>
        <div class = 'sage nodisplay code'>sage: chi.jacobi_sum()</div>
        <form> \( J(\chi_{ {{number}} },\psi) \;\) for \( \;\psi = \)
            <input id="calc-jacobi-input" size="10" placeholder="{{modulus}}.{{number|int - 1}}">
            <button id="calc-jacobi-go"> Compute </button>
            <span class="formexample"> e.g. {{modulus}}.{{number|int - 1}}</span>
            <div class="slider" id="slider-jacobi-b"></div>
        </form>
        <div class="output"><span id="calc-jacobi-output"></span></div>
        
        {# Kloosterman sum #}

        <h2>
            {{ KNOWL('character.dirichlet.kloosterman_sum') }}
        </h2>
        <div class = 'sage nodisplay code'>sage: chi.kloosterman_sum(,)</div>
        <form> \(K(a,b,\chi_{ {{number}} }) \;\) at \(\; a,b = \)
            <input id="calc-kloosterman-input" size=10 placeholder="1,2">
            <button id="calc-kloosterman-go"> Compute </button>
            <span class="formexample"> e.g. 1,2</span>
            <div class="slider" id="slider-kloosterman-a"></div>
            <div class="slider" id="slider-kloosterman-b"></div>
        </form>
        <div class="output"><span id="calc-kloosterman-output"></span></div>

<script type="text/javascript">
function gauss_handler(evt) {
   evt.preventDefault();
   var val = $("#calc-gauss-input").val();
   $("#calc-gauss-output").load("{{ url_for('dc_calc_gauss', modulus=modulus,number=number) }}" + "?val=" + val, 
     function() {
       {# tell mathjx to render the output #}
i       MathJax.Hub.Queue(['Typeset', MathJax.Hub, "calc-gauss-output"]);
     });
}

function jacobi_handler(evt) {
   evt.preventDefault();
   var val = $("#calc-jacobi-input").val();
   $("#calc-jacobi-output").load("{{ url_for('dc_calc_jacobi', modulus=modulus,number=number) }}" + "?val=" + val,
     function() {
       {# tell mathjx to render the output #}
       MathJax.Hub.Queue(['Typeset', MathJax.Hub, "calc-jacobi-output"]);
     });
}

function kloosterman_handler(evt) {
   evt.preventDefault();
   var val = $("#calc-kloosterman-input").val();
   $("#calc-kloosterman-output").load("{{ url_for('dc_calc_kloosterman', modulus=modulus,number=number) }}" + "?val=" + val,
     function() {
       {# tell mathjx to render the output #}
       MathJax.Hub.Queue(['Typeset', MathJax.Hub, "calc-kloosterman-output"]);
     });
}

$(function() {
    $("#calc-gauss-go").click(function(e) {gauss_handler(e)});
    $("#calc-jacobi-go").click(function(e) {jacobi_handler(e)});
    $("#calc-kloosterman-go").click(function(e) {gauss_handler(e)});
    $("#calc-gauss-input").keypress(function(e) {
        if (e.which == 13) gauss_handler(e);
    });
    $("#calc-jacobi-input").keypress(function(e) {
        if (e.which == 13) jacobi_handler(e);
    });
    $("#calc-kloosterman-input").keypress(function(e) {
        if (e.which == 13) kloosterman_handler(e);
    });

    $( "#slider-gauss" ).slider({ value:2, min: 1, max: 5000, step: 1,
        change: function( event, ui ) {
          $( "#calc-gauss-input" ).val(ui.value );
          gauss_handler(event);
        }
     });

    function jacobi_slider_handler(event, ui) {
      var a = {{ modulus }};
      var b = $("#slider-jacobi-b").slider("value");
      $( "#calc-jacobi-input" ).val(a+"."+b);
      jacobi_handler(event);
    }; 

    $( "#slider-jacobi-b").slider({ value:{{ number|int - 1 }}, min: 0, max: {{eulerphi}}, step: 1,
        change: function( event, ui ) {
          jacobi_slider_handler(event);
        }
     });

    function kloosterman_slider_handler(event, ui) {
      var a = $("#slider-kloosterman-a").slider("value");
      var b = $("#slider-kloosterman-b").slider("value");
      $( "#calc-kloosterman-input" ).val(""+a+","+b);
      kloosterman_handler(event);
    }; 

    $( "#slider-kloosterman-a" ).slider({ value:1, min: 1, max: 5000, step: 1,
      change: function( event, ui ) {
        kloosterman_slider_handler(event, ui);
       }
     });

    $( "#slider-kloosterman-b" ).slider({ value:2, min: 1, max: 5000, step: 1,
      change: function( event, ui ) {
        kloosterman_slider_handler(event, ui);
      }
     });

});
</script>
{% endblock %}

