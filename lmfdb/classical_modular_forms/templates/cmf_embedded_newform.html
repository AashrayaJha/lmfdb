{% extends 'cmf_newform_common.html' %}

{% block subcontent %}
<h2>Coefficient data</h2>


For each \(n\) we display the coefficients of the \(q\)-expansion \(a_n\), the
{{ KNOWL('mf.elliptic.satake_parameters',title='Satake parameters') }} \(\alpha_p)\),
and the Satake angles \(\theta_p = \textrm{Arg}(\alpha_p)\).


<script>
function show_primes_all(cl) {
  $('.all').hide();
  $('.primes').hide();
  $('.'+cl).show();
}
</script>
<a name="embeddings"></a>
<div class="table-scroll-wrapper">
  <table class="ntdata complex-cols">
    <thead>
      <tr>
        <th>
          n
        </th>
        <th class='center' colspan="3">
          \(a_n\)
        </th>
        <th class='center' colspan="3">
          \( a_{n} / n^{(k-1)/2} \)
        </th>
        <th class='center' colspan="3">
          \( \alpha_n \)
        </th>
        <th class='center'>
          \( \theta_n \)
        </th>
      </tr>
    </thead>
    <tbody>
      {% set m = newform.embedding_m %}
      {% for n in range(2,50) %}
      {% if n in newform.character_values %} {# n is a prime that doesn't divide the level #}
          {% set rowspan = 2 %}
          {% set class_primes ="primes all" %}
        {% else %}
          {% set rowspan = 1 %}
          {% set class_primes ="all nodisplay" %}
        {% endif %}
        {% if loop.index is divisibleby(2) %}
          {% set shade = 'dark' %}
        {% else %}
          {% set shade = 'light' %}
        {% endif %}

        <tr class="{{class}}">
          <td rowspan="{{rowspan}}" class="{{shade}}">
            \({{n}}\)
          </td>
          {% set an_formats = ['embed', 'analytic_embed'] %}
          {% for format in an_formats %}
            <td rowspan="{{rowspan}}" class="nowrap real">
              {{ newform.embedding_re(m, n, prec=info.emb_prec, format=format) | safe }}
            </td>
            <td rowspan="{{rowspan}}" class="op">
              {{ newform.embedding_op(m, n, prec=info.emb_prec) | safe }}
            </td>
            <td rowspan="{{rowspan}}" class="nowrap imag">
              {{ newform.embedding_im(m, n, prec=info.emb_prec, format=format) | safe }}
            </td>
          {% endfor %}
          {% if rowspan == 2 %} {# if n is prime #}
           {% for i in [0,1] %}
            {%if i == 1 %}
              <tr class="{{class}}">
            {% endif %}
            <td class="nowrap real">
              {{ newform.satake_re(m,n,i,prec=info.emb_prec) | safe }}
            </td>
            <td class="op">
              {{ newform.satake_op(m,n,i) | safe }}
            </td>
            <td class="imag">
              {{ newform.satake_im(m,n,i,prec=info.emb_prec) | safe }}
            </td>
            <td class="nowrap right">
              {{ newform.satake_angle(m,n,i,prec=info.emb_prec) | safe }}
            </td>
            </tr>
           {% endfor %}
          {% else %}
            </tr>
          {% endif %}

    {% endfor %} {# n in info.CC_n #}
    <tr>
      <td>
    <span class="primes">
        <a onclick="show_primes_all('all'); return true" href="#embeddings">See all \(n\)</a>
    </span>
    <span class="all nodisplay">
        <a onclick="show_primes_all('primes'); return true" href="#embeddings">See only primes</a>
        </span>
      </td>
    </tr>
    </tbody>
  </table>
</div>

<form id='complex_embeddings'>
  <table>
    <tr>
      <td>{{ KNOWL('dq.mf.elliptic.cc_prec', title='Significant digits') }}: </td>
      <td><input type='text' name='prec' style="width: 160px" value="{{info.prec}}" placeholder="6"></td>
    </tr>
    <tr>
      <td>{{ KNOWL('mf.elliptic.embedding_format',title='Format') }}: </td>
      {% set formats = [('primes', 'primes only'), ('all','all')] %}
      <td><select name='format' style="width: 170px">
          {% for format in formats %}
            <option value='{{format[0]}}' {% if info.format == format[0] %}selected{% endif %}>{{format[1]}}</option>
          {% endfor %}
      </select></td>
    </tr>
  </table>
  <button id="refresh_complex">Refresh table</button>
</form>





{% endblock %}
